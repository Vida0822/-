<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title> Insert title here</title>
<link rel="shortcut icon" type="image/x-icon" href="../images/SiSt.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<style>
  .myProgress{
    width:100%;
    background-color: #ddd;
    border:solid 1px gray;
  }
  
  .myBar{
    width:1%;
    height: 30px;
    background-color: #4CAF50;
    text-align: right;
    color:red;
  }
</style>

</head>
<body>
<div id="myProgress1" class="myProgress">
   <div id="myBar1" class="myBar"></div>
   <button id="btn1">진행</button>
</div>
<div id="myProgress2" class="myProgress">
   <div id="myBar2" class="myBar"></div>
   <button id="btn2">진행</button>
</div>
<div id="myProgress3" class="myProgress">
   <div id="myBar3" class="myBar"></div>
   <button id="btn3">진행</button>
</div>
<div id="myProgress4" class="myProgress">
   <div id="myBar4" class="myBar"></div>
   <button id="btn4">진행</button>
</div>
<div id="myProgress5" class="myProgress">
   <div id="myBar5" class="myBar"></div>
   <button id="btn5">진행</button>
</div>

<script>
// js
/* 	var btns = document.querySelectorAll(".myProgress button"); 
	for (var i = 0; i < btns.length; i++) {
		btns[i].onclick= function() {
			// 각각의 버튼에 클릭 이벤트 거는거임 
			// this == event.srcElement == 클릭된 버튼
			let btn = event.srcElement ; 
			let width = 1; // 지역변수 -> 폐쇠된 클로저 전역변수 
			var timer = setInterval(function() { // 중첩함수 
				
				if (width < 100) {
					// 진행버튼 앞에있는 div 태그 
					btn.previousElementSibling.style.width = ++width + "%";  
					btn.previousElementSibling.innerHTML = width + "%";  
				} else {
					clearInterval(timer); 
				}
			}, 30)
		}
	} */

// jquery 
	$(".myProgress button").click(function() {
		let btn = $(this) // event.srcElement ; 
		let width = 1; // 지역변수 -> 폐쇠된 클로저 전역변수 
		var timer = setInterval(function() { // 중첩함수 
			
			if (width < 100) {
				// 진행버튼 앞에있는 div 태그 
				btn
					.prev()
					.css("width", ++width + "%") 
					.html(width + "%");  
			} else {
				clearInterval(timer); 
			}
		}, 30)
	}); 
	
	
	
	
	
	
	
	
</script>
</body>
</html>